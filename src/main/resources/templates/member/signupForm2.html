<!--이 파일을 복사하여 templates/본인기능폴더 하위에 추가하여 작업해주세요-->
<html layout:decorate="~{layout}" xmlns:th="http://www.thymeleaf.org">
<!-- bootstrap css -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<div layout:fragment="content" class="container my-3">
   <!-- 약관내용 스타일 적용 -->
    <style>
        .details {
            display: none;
            margin-left: 20px;
            padding: 10px;
            border: 1px solid #ccc;
        }
    </style>

    <div class="row">
        <!--<div th:replace="~{각페이지에맞는사이드바파일경로::sidebar}"></div>-->
        <div th:replace="~{/test/testSidebar::sidebar}"></div> <!--테스트 사이드바 경로를 넣어놓음-->

        <div style="border: 1px solid black;" class="col-10"> <!--class에서 col-10은 빼면 안됨-->
            <!-- 맡은 기능 구현 하시면 됩니다! -->
         <div class="joinForm">
                <h1 class="text-center fs-4"> 나도9단 회원가입</h1>
                <form   th:action="@{/member/signup2}"
                        th:object="${userCreateForm}" method="post">

                    <!-- start step indicators -->
                    <div class="form-header d-flex mb-4">
                        <span class="stepIndicator">약관동의</span>
                        <span class="stepIndicator">본인인증</span>
                        <span class="stepIndicator">개인 정보 입력</span>
                    </div>
                    <!-- end step indicators -->

                <!-- step one -->
                <div class="step">
                    <p class="text-center mb-4">약관 동의</p>
                    <div class="mb-3">
                        <!-- 전체 동의 -->
                        <input type="checkbox" id="checkAll"> <label for="checkAll">전체동의</label>
                        <!-- 이용 약관 -->
                        <div class="agreement">
                            <input type="checkbox" id="agreement1" required> <label for="agreement1">이용 약관 (필수)</label>
                            <div class="details">
                                <P>이용 약관 내용...</P>
                            </div>
                        </div>

                        <!-- 개인정보 필수항목에 대한 처리 및 이용 -->
                        <div class="agreement">
                            <input type="checkbox" id="agreement2" required> <label for="agreement2">개인정보 필수항목에 대한 처리 및 이용 (필수)</label>
                            <div class="details">
                                개인정보 필수항목 처리 및 이용 내용...
                            </div>
                        </div>

                        <!-- 개인정보 선택항목에 대한 처리 및 이용 -->
                        <div class="agreement">
                            <input type="checkbox" id="agreement3"> <label for="agreement3">개인정보 선택항목에 대한 처리 및 이용 (선택)</label>
                            <div class="details">
                                개인정보 선택항목 처리 및 이용 내용...
                            </div>
                        </div>

                        <!-- 개인정보 마케팅 및 광고 활용 -->
                        <div class="agreement">
                            <input type="checkbox" id="agreement4"> <label for="agreement4">개인정보 마케팅 및 광고 활용 (선택)</label>
                            <div class="details">
                                <P>개인정보 마케팅 및 광고 활용 내용...</P>
                            </div>
                        </div>

                        <!-- 개인정보의 위탁 -->
                        <div class="agreement">
                            <input type="checkbox" id="agreement5" required> <label for="agreement5" >개인정보의 위탁 (필수)</label>
                            <div class="details">
                                <P> 개인정보의 위탁 내용...</P>
                            </div>
                        </div>

                    </div> <!-- mb-3 -->

                <div class="authMember">
                    <p class="text-center mb-4">본인 인증</p>
                    <form th:action="@{/member/sms/send}" method="post">
                    <div class="mb-3">
                        <input type="text" placeholder="이름" oninput="this.className = ''" name="name">
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" name="to" placeholder="본인 휴대폰번호를 입력하세요" oninput="oninputPhone(this)" maxlength="14">
                    </div>
                        <button class="btn btn-default">발송</button>
                    </form>
                </div> <!-- authMember 끝 -->
            </div> <!-- step1 : 약관동의 끝 -->
                    <script src="/js/member/AgreenAuth.js"></script>
                <!-- step two -->
                <div class="step">
                        <p class="text-center mb-4">개인정보 입력</p>

                        <!-- 아이디 입력란 -->
                        <label for="username">아이디:</label>
                        <input type="text" id="username" name="username" required>
                        <button type="button" id="checkUsername">중복 확인</button>
                        <br>

                        <!-- 비밀번호 입력란 -->
                        <label for="password">비밀번호:</label>
                        <input type="password" id="password" name="password" required>
                        <br>

                        <!-- 비밀번호 확인 입력란 -->
                        <label for="confirmPassword">비밀번호 확인:</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" required>
                        <br>

                        <!-- 이메일 주소 입력란 -->
                        <label for="email">이메일 주소:</label>
                        <input type="email" id="email" name="email" required>
                        <br>

                        <!-- 생년월일 입력란 -->
                        <label for="birthdate">생년월일:</label>
                        <input type="date" id="birthdate" name="birthdate" required>
                        <br>

                        <!-- 회원 구분 드롭다운 -->
                        <label for="memberType">회원 구분:</label>
                        <select id="memberType" name="memberType">
                            <option value="교육자">교육자</option>
                            <option value="학생">학습자</option>
                            <option value="일반인">일반인</option>
                            <option value="일반인">운영자</option>
                        </select>
                        <br>

                        <!-- 전화번호 입력란 -->
                        <label for="phoneNumber">전화번호:</label>
                        <input type="tel" id="phoneNumber" name="phoneNumber">
                        <label><input type="checkbox" id="noPhoneNumber" name="noPhoneNumber">없음</label>
                        <br>

                        <!-- 수신동의 (이메일 및 SMS 중 선택) -->
                        <label>수신 동의:</label>
                        <input type="checkbox" id="emailConsent" name="emailConsent" value="이메일">이메일
                        <input type="checkbox" id="smsConsent" name="smsConsent" value="SMS">SMS
                        <br>

                        <input type="submit" value="가입하기">
                 </div> <!-- step2 끝 -->

              </form> <!-- form 형식 끝 -->
             </div><!-- joinForm -->
         </div> <!-- col-10 메인 내용 -->
        </div><!--row -->
    </div><!--layout-->

<script>
    //인증번호 발송
    function oninputPhone(target) {
        var inputValue = target.value;

        // 입력 값이 빈 공간이면 포커스를 설정하고 알림 메시지를 표시합니다.
        if (inputValue.trim() === '') {
            target.focus();
            document.getElementById('notification').textContent = '휴대전화번호를 입력하세요';
        } else {
            document.getElementById('notification').textContent = ''; // 알림 메시지 지우기
        }

        // 입력 값이 숫자가 아닌 문자를 제거합니다.
        var numericValue = inputValue.replace(/[^0-9]/g, '');

        // 입력 값이 유효한 숫자 형식인 경우 하이픈(-)을 추가합니다.
        if (numericValue.length >= 3) {
            numericValue = numericValue.replace(/(\d{3})(\d{0,4})(\d{0,4})/, "$1-$2-$3");
        }

        // 입력 값을 다시 설정합니다.
        target.value = numericValue;
    }

</script>

</html>
